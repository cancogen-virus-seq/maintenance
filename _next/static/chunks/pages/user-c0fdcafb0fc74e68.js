(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[235],{304:function(e,t,r){"use strict";r.d(t,{t:function(){return l}});var n=r(4455),o=r(7441),i=r(6521),s=r(5944);var a=(0,n.Z)("span",{target:"e1ngfwlx0"})({name:"1gt2cgk",styles:"line-height:24px"}),c=function(){var e=(0,o.i)().NEXT_PUBLIC_ADMIN_EMAIL,t=e?i.ZP:a;return(0,s.tZ)(t,{href:"mailto:".concat(e),children:"Portal administrator"})},l=function(){return(0,s.BX)("span",{children:["Please try again. If the problem persists, please contact the ",(0,s.tZ)(c,{})," for help troubleshooting the issue."]})};t.Z=c},8244:function(e,t,r){"use strict";var n,o,i,s;r.d(t,{lP:function(){return s}}),function(e){e.APPROVED="APPROVED",e.DISABLED="DISABLED",e.PENDING="PENDING",e.REJECTED="REJECTED"}(n||(n={})),function(e){e.ADMIN="ADMIN",e.USER="USER"}(o||(o={})),function(e){e.ENGLISH="English",e.FRENCH="French",e.SPANISH="Spanish"}(i||(i={})),function(e){e.GOOGLE="GOOGLE",e.GITHUB="GITHUB",e.KEYCLOAK="KEYCLOAK",e.LINKEDIN="LINKEDIN",e.ORCID="ORCID"}(s||(s={}))},9081:function(e,t,r){"use strict";var n,o=r(9499),i=r(5551),s=r(8244),a=(n={},(0,o.Z)(n,s.lP.KEYCLOAK,{displayName:"KeyCloak",path:"keycloak",icon:i.ao}),(0,o.Z)(n,s.lP.GOOGLE,{displayName:"Google",path:"google",icon:i.av}),(0,o.Z)(n,s.lP.ORCID,{displayName:"ORCiD",path:"orcid",icon:i.oN}),(0,o.Z)(n,s.lP.GITHUB,{displayName:"GitHub",path:"github",icon:i.c8}),(0,o.Z)(n,s.lP.LINKEDIN,{displayName:"LinkedIn",path:"linkedin",icon:i.IZ}),n);t.Z=a},8673:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return U}});var n=r(29),o=r(7794),i=r.n(o),s=r(7294),a=r(4455),c=r(917),l=r(5175),d=r(1116),u=r(3663),p=r(6486),h=r(7964),m=r(1226),g=r(304),f=r(6404),v=r(5944);var y={name:"13m9g0o",styles:"font-weight:600;margin:10px 0 0;padding-left:0"},x=function(){return(0,v.BX)(f.Z,{size:"md",title:"Invalid Permissions",styles:"\n      align-items: center;\n      box-sizing: border-box;\n      flex-direction: column;\n      font-size: 14px;\n      justify-content: center;\n      max-width: 100%;\n      width: 100%;\n\n      p {\n        margin-top: 5px;\n      }\n    ",children:[(0,v.BX)("p",{children:["You are not authorized to submit data into the Canadian VirusSeq Data Portal. ","In order to obtain the correct permissions, please contact ",(0,v.tZ)("a",{href:"mailto:info@virusseq-dataportal.ca",children:"info@virusseq-dataportal.ca"})," with the following information. Permission should be granted within 2 business days."]}),(0,v.BX)("ol",{css:y,children:[(0,v.tZ)("li",{children:"The name of your institution."}),(0,v.tZ)("li",{children:"The name of the lead investigator for your study."}),(0,v.tZ)("li",{children:"The study ID (if known)."}),(0,v.tZ)("li",{children:"The email address you used to log in to the VirusSeq Data Portal."})]})]})},b=r(5551),Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3;return new Promise((function(t){setTimeout((function(){t("")}),e)}))};var E,w=(0,a.Z)("div",{target:"e1vlw0tm0"})((function(e){var t=e.theme;return(0,c.iv)(null===t||void 0===t?void 0:t.typography.label,";background:",null===t||void 0===t?void 0:t.colors.grey_6,";border-radius:2px;padding:2px 4px;color:white;font-weight:normal;margin-bottom:10%;&:before{content:'';display:block;position:absolute;width:0;height:0;border:5px solid transparent;pointer-events:none;right:50%;top:79%;border-top-color:",null===t||void 0===t?void 0:t.colors.grey_6,";border-right:5px solid transparent;border-left:5px solid transparent;margin-right:-5px;}","")}),";");!function(e){e.SCOPES_ERROR="scopes_error",e.GENERATE_TOKEN_ERROR="generate_token_error",e.REVOKE_TOKEN_ERROR="revoke_token_error",e.FETCH_TOKENS_ERROR="fetch_tokens_error",e.NO_VALID_PERMISSIONS_ERROR="no_valid_permissions_error"}(E||(E={}));var _=function(e){var t=e.requestError;return(0,v.BX)("span",{children:[t,(0,v.tZ)(g.t,{})]})},R=function(e){var t=e.type,r=e.statusCode;switch(t){case E.SCOPES_ERROR:return(0,v.tZ)(_,{requestError:"HTTP error ".concat(r,": Error fetching current permissions. Your Access token could not be generated. ")});case E.GENERATE_TOKEN_ERROR:return(0,v.tZ)(_,{requestError:"HTTP error ".concat(r,": Your Access token could not be generated. ")});case E.REVOKE_TOKEN_ERROR:return(0,v.tZ)(_,{requestError:"HTTP error ".concat(r,": Your Access token could not be revoked. ")});case E.FETCH_TOKENS_ERROR:return(0,v.tZ)(_,{requestError:"HTTP error ".concat(r,": Your existing Access tokens could not be fetched. ")});case E.NO_VALID_PERMISSIONS_ERROR:return(0,v.BX)("span",{children:["You do not have permissions to generate an Access token. Your permissions may have changed recently. Please contact the ",(0,v.tZ)(g.Z,{})," to gain the correct permissions."]});default:return(0,v.tZ)(_,{requestError:"Your request could not be completed. "})}},k={name:"g84qow",styles:"border-radius:0px 5px 5px 0px;width:69px;height:36px;position:relative"},N={name:"ir16hj",styles:".tippy-popper .leave{opacity:0;}"},O={name:"18usvte",styles:"position:relative;display:flex;flex-direction:row;justify-content:space-between;margin-bottom:1rem;margin-top:1rem;max-width:600px"},I={name:"1a4d85r",styles:"font-size:14px;display:block"},T={name:"di48ht",styles:"margin:1.5rem 0"},P={name:"5ghe2w",styles:"margin-bottom:1rem;margin-top:0.5rem"},S=function(){var e=(0,l.Z)(),t=e.token,r=e.userHasWriteScopes,o=(0,s.useState)(null),a=o[0],d=o[1],g=(0,s.useState)(!1),y=g[0],E=g[1],_=(0,s.useState)(!1),S=_[0],D=_[1],A=(0,s.useState)(null),C=A[0],B=A[1],X=(0,u.a)();return(0,s.useEffect)((function(){t&&d(t)}),[t]),(0,v.BX)("div",{children:[(0,v.tZ)("h2",{css:(0,c.iv)(X.typography.regular,";font-size:24px;line-height:40px;color:",X.colors.primary,";",""),children:"Access Token"}),(0,v.tZ)("div",{css:P,children:!r&&(0,v.tZ)(x,{})}),(0,v.BX)("ol",{css:(0,c.iv)(X.typography.subheading,";font-weight:normal;color:",X.colors.accent_dark,";margin-bottom:1rem;",""),children:[(0,v.tZ)("li",{children:"Your access token is used to submit data through a command line client."}),(0,v.tZ)("li",{children:"Your access token is associated with your user credentials and should NEVER be shared with anyone."}),(0,v.tZ)("li",{children:"Your access token lasts only for 24 hours."})]}),(null===C||void 0===C?void 0:C.type)&&(0,v.tZ)("div",{css:T,children:(0,v.tZ)(f.Z,{size:"sm",css:(0,c.iv)("background-color:",X.colors.error_1,";color:",X.colors.accent_dark,";",""),dismissible:!0,onDismiss:function(){return B(null)},children:(0,v.tZ)("span",{css:I,children:R(C)})})}),(0,v.BX)("div",{css:O,children:[(0,v.tZ)("div",{css:(0,c.iv)("border:1px solid ",X.colors.grey_5,";border-radius:5px 0px 0px 5px;border-right:0px;color:",(0,p.isEmpty)(a)?X.colors.grey_6:X.colors.black,";width:100%;display:flex;align-items:center;padding-left:5px;",""),children:(0,v.tZ)("span",{css:(0,c.iv)("white-space:nowrap;overflow:hidden;text-overflow:ellipsis;",X.typography.subheading," font-weight:normal;padding-right:5px;padding-left:5px;",""),children:a||"You have no Access token..."})}),(0,v.BX)(v.HY,{children:[(0,v.tZ)(c.xB,{styles:N}),(0,v.tZ)(h.Tooltip,{unmountHTMLWhenHide:!0,open:S,arrow:!0,html:(0,v.tZ)(w,{theme:X,id:"tooltip",children:"Copied!"}),position:"top",children:(0,v.BX)(m.ZP,{disabled:(0,p.isEmpty)(a)||y,css:function(){return k},onClick:function(){return t&&(e=t,E(!0),void navigator.clipboard.writeText(e).then((0,n.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(!1);case 2:return e.next=4,D(!0);case 4:return e.next=6,Z();case 6:D(!1);case 7:case"end":return e.stop()}}),e)})))).catch((function(e){console.warn("Failed to copy token! ",e),E(!1)})));var e},children:[(0,v.tZ)("span",{css:(0,c.iv)("position:absolute;top:8px;left:24px;visibility:",S?"visible":"hidden",";",""),children:(0,v.tZ)(b.MC,{size:20,fill:X.colors.white})}),(0,v.tZ)("span",{css:(0,c.iv)("visibility:",S?"hidden":"visible",";",""),children:"Copy"})]})})]})]})]})},D=r(9081),A=function(e){var t,r,n=e.provider,o=null===(t=D.Z[n])||void 0===t?void 0:t.icon,i=(0,u.a)();return(0,v.BX)("div",{css:function(e){return(0,c.iv)("width:235px;max-height:30px;border:1px solid ",e.colors.grey_5,";border-radius:5px;background-color:",e.colors.white,";",e.typography.data,";display:flex;justify-content:space-between;align-items:center;padding:2px 7px 0;","")},children:[(0,v.tZ)("span",{css:function(e){return(0,c.iv)("border-right:1px solid ",e.colors.grey_5,";padding:0 10px 0 0;","")},children:o&&(0,v.tZ)(o,{height:20,width:20})}),(0,v.BX)("span",{css:function(e){return(0,c.iv)(e.typography.data,";color:",e.colors.accent_dark,";","")},children:["Authenticated with ",null===(r=D.Z[n])||void 0===r?void 0:r.displayName]}),(0,v.tZ)(b.MC,{size:15,fill:i.colors.success})]})},C=function(){var e=(0,u.a)(),t=(0,l.Z)(),r=t.user,n=t.userHasWriteScopes,o=t.userCanSubmitDataForAllStudy,i=(0,s.useState)(null),a=i[0],d=i[1];return(0,s.useEffect)((function(){o?d(["All Studies"]):n&&!a&&d(((null===r||void 0===r?void 0:r.scope)||[]).filter((function(e){return e.includes("WRITE")})).map((function(e){return e.replace(".WRITE","")})))}),[n,o]),n&&a&&a.length>0?(0,v.BX)("div",{css:(0,c.iv)("border-top:1px solid ",e.colors.grey_3,";margin-top:20px;",""),children:[(0,v.tZ)("h2",{css:(0,c.iv)(e.typography.regular,";font-size:24px;line-height:40px;color:",e.colors.primary,";",""),children:"Study Access"}),(0,v.tZ)("p",{children:"You are authorized to submit data for the following studies:"}),o?(0,v.tZ)("b",{children:"All Studies"}):(0,v.tZ)("ul",{css:(0,c.iv)(e.typography.subheading,";font-weight:normal;color:",e.colors.accent_dark,";margin-bottom:1rem;",""),children:null===a||void 0===a?void 0:a.map((function(e){return(0,v.tZ)("li",{children:e},e)}))})]}):null},B=r(5360),X=function(){return(0,v.tZ)("div",{css:(0,c.iv)(B.Z.typography.regular," font-size:13px;color:",B.Z.colors.white,";display:flex;align-items:center;border-radius:6px;background-color:",B.Z.colors.accent3_alternate,";margin:9px 0px 9px 15px;padding:0px 8px 0px 8px;",""),children:(0,v.tZ)("span",{children:"Data Curator"})})};var H=(0,a.Z)(d.Z,{target:"e1rbucu4"})((function(e){var t=e.theme;return(0,c.iv)("background-color:",null===t||void 0===t?void 0:t.colors.white,";","")}),";"),K=(0,a.Z)("div",{target:"e1rbucu3"})({name:"zjik7",styles:"display:flex"}),L=(0,a.Z)(K,{target:"e1rbucu2"})((function(e){var t=e.theme;return(0,c.iv)("flex-direction:row;justify-content:space-between;width:800px;margin-top:1.5rem;margin-bottom:0.5rem;padding-bottom:2.5rem;border-bottom:1px solid ",null===t||void 0===t?void 0:t.colors.grey_3,";","")}),";"),Y=(0,a.Z)("h1",{target:"e1rbucu1"})((function(e){var t=e.theme;return(0,c.iv)(null===t||void 0===t?void 0:t.typography.regular,";font-size:30px;line-height:36px;color:",null===t||void 0===t?void 0:t.colors.primary,";margin-bottom:0.5rem;margin-top:0.1rem;","")}),";"),G=(0,a.Z)("div",{target:"e1rbucu0"})((function(e){var t=e.theme;return(0,c.iv)(null===t||void 0===t?void 0:t.typography.subheading,";color:",null===t||void 0===t?void 0:t.colors.accent_dark,";font-weight:normal;padding-left:0.2rem;","")}),";"),z={name:"mcnhyd",styles:"flex-direction:row"},q={name:"qdeacm",styles:"flex-direction:column"},M={name:"1nnb6ww",styles:"flex-direction:column;margin:1rem 2rem;width:800px"},V=function(){var e=(0,l.Z)(),t=e.user,r=e.userIsCurator;return(0,v.tZ)(H,{subtitle:"User Profile & Token",children:(0,v.tZ)(K,{css:function(e){return(0,c.iv)("justify-content:center;padding:40px 0 calc(",e.dimensions.footer.height,"px + 30px);","")},children:t&&(0,v.BX)(K,{css:M,children:[(0,v.BX)(L,{children:[(0,v.BX)(K,{css:q,children:[(0,v.BX)(K,{css:z,children:[(0,v.tZ)(Y,{children:"".concat(t.firstName," ").concat(t.lastName)}),r&&(0,v.tZ)(X,{})]}),(0,v.tZ)(G,{children:t.email||""})]}),(0,v.tZ)(A,{provider:t.providerType})]}),(0,v.tZ)(S,{}),(0,v.tZ)(C,{})]})})})},j=(0,r(6716).D)({getInitialProps:function(){var e=(0,n.Z)(i().mark((function e(t){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.egoJwt,e.abrupt("return",{egoJwt:r});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})((function(){return(0,v.tZ)(V,{})})),U=j},8948:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user",function(){return r(8673)}])}},function(e){e.O(0,[73,964,413,774,888,179],(function(){return t=8948,e(e.s=t);var t}));var t=e.O();_N_E=t}]);